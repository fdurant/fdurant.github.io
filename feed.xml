<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">Frederik Durant's .data blog</title>
<generator uri="https://github.com/jekyll/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="/feed.xml" />
<link rel="alternate" type="text/html" href="" />
<updated>2015-04-08T08:46:57-04:00</updated>
<id>/</id>
<author>
  <name>Frederik Durant</name>
  <uri>/</uri>
  
</author>


  

<entry>
  <title type="html"><![CDATA[An end-to-end loan funding predictor for kiva.org]]></title>
  <link rel="alternate" type="text/html" href="/projects/kiva-loan-funding-predictor-project/" />
  <id>/projects/kiva-loan-funding-predictor-project</id>
  <published>2015-04-07T07:00:00-04:00</published>
  <updated>2015-04-07T07:00:00-04:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;Project: an end-to-end loan funding predictor for kiva.org&lt;/title&gt;
  &lt;!--script src=&quot;http://d3js.org/d3.v3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script--&gt;
  &lt;!--script src=&quot;http://d3js.org/d3.v3.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script--&gt;
  &lt;!--script src=&quot;nv.d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script)--&gt;

  &lt;script src=&quot;d3.v3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;visualizer.css&quot; /&gt;
  &lt;script src=&quot;http://code.jquery.com/jquery-1.11.2.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;jquery.lettering-0.6.1.min.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot; src=&quot;career_center.js&quot;&gt;&lt;/script&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=1.0, maximum-scale=1.0&quot; /&gt;
  &lt;script src=&quot;sankey.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;loanflow_visualizer.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

  &lt;/head&gt;

  &lt;body&gt;

    &lt;h2&gt;No time? Here&#39;s the short story&lt;/h2&gt;

    &lt;iframe src=&quot;//www.slideshare.net/slideshow/embed_code/46767328&quot; width=&quot;476&quot; height=&quot;400&quot; frameborder=&quot;1&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

    &lt;h2&gt;Introduction&lt;/h2&gt;

    &lt;p&gt;My &lt;a href=&quot;/projects/kiva-topic-modelling-project/&quot; target=&quot;_&quot;&gt;previous blog post&lt;/a&gt; offered a high-level glance  
      into the loan descriptions at &lt;a href=&quot;http://kiva.org/&quot; target=&quot;_&quot;&gt;kiva.org&lt;/a&gt;.
      For my final project at
      the &lt;a href=&quot;http://www.thisismetis.com/data-science&quot; target=&quot;_&quot;&gt;Metis Data Science Bootcamp&lt;/a&gt;, 
      I delved a bit deeper in the micro-finance mechanics at Kiva,
      looking for a practical problem to solve.
      Earlier &lt;a href=&quot;#kiva_research&quot;&gt;research papers on Kiva&lt;/a&gt;
      have studied for example how images of Kiva borrowers
      influence loan decisions by lenders &lt;a href=&quot;#jenq_pan_theseira&quot;&gt;[1]&lt;/a&gt;,
      or which factors motivate
      lenders to make additional
      loans &lt;a href=&quot;#Choo_Lee_Lee_Zha_Park&quot;&gt;[2]&lt;/a&gt;. My high-level
      aim in this project was double: produce &lt;b&gt;new insights&lt;/b&gt;, and, above all, build
      something &lt;b&gt;ready to use and demo&lt;/b&gt; &amp;mdash; all in the course of
      four weeks.
    &lt;/p&gt;

    &lt;p&gt;Let&#39;s start by setting the stage.&lt;/p&gt;

    &lt;h3&gt;The micro-finance process at Kiva.org&lt;/h3&gt;

    &lt;p&gt;
      The abovementioned paper &lt;a href=&quot;#Choo_Lee_Lee_Zha_Park&quot;&gt;[2]&lt;/a&gt; contains a clear overview of
      the &lt;a href=&quot;http://www.kiva.org/about/how/even-more&quot; target=&quot;_&quot;&gt;Kiva loan process&lt;/a&gt;. It is repeated here below, but with
      a couple of additions (two ovals and one curved arrow) to point
      out some particulars that drew my attention:&lt;/p&gt;

    
      &lt;ul&gt;
	&lt;li&gt;Field partners actually &lt;b&gt;pre&lt;/b&gt;disburse loans to
	borrowers &lt;b&gt;before&lt;/b&gt; they are published to lenders
	on the Kiva website. This obviously involves a certain risk.&lt;/li&gt;
	&lt;li&gt;So, when (typically an ad hoc group of) lenders allocate their money to a
	loan, they are actually &lt;b&gt;back-filling a 
	predisbursed loan&lt;/b&gt;. Only when a loan is fully backfilled
	does the loan default &lt;b&gt;risk 
	move from the field partner to the lenders&lt;/b&gt;.&lt;/li&gt;
      &lt;/ul&gt;
      
      &lt;figure&gt;
	&lt;img src=&quot;/images/kiva_loan_process.png&quot; /&gt;
	&lt;figcaption&gt;Augmented overview of the Kiva loan process
	(adapted from [&lt;a href=&quot;#Choo_Lee_Lee_Zha_Park&quot;&gt;2&lt;/a&gt;])&lt;/figcaption&gt;
      &lt;/figure&gt;

    &lt;p&gt;The crucial point, of course, is whether &lt;b&gt;enough&lt;/b&gt; lenders will be
    found &lt;b&gt;within a loan request&#39;s expiration time&lt;/b&gt; to back-fill the
    loan.
      When a loan is not completely funded
    in time, the allocated amounts return to the Kiva lenders, and the full
    risk stays with the field partner. The predisbursed loan itself,
    however, remains: the borrower already received the money, and is expected to
    pay it back over time.&lt;/p&gt;

    &lt;p&gt;Getting loans fully funded is in the interest of multiple
    parties:
      &lt;ul&gt;
	&lt;li&gt;Even though &lt;b&gt;field partners&lt;/b&gt; must have some capital of their own,
	they want to limit their overall risk by having the worldwide
	Kiva lender community maximally back-fill the predisbursed loans.&lt;/li&gt;
	&lt;li&gt;Kiva &lt;b&gt;lenders&lt;/b&gt; &amp;mdash; who are benevolent by definition &amp;mdash; want to
	see their available capital used, rather than stay
	dormant in the system.&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;Borrowers&lt;/b&gt; will have an easier time getting loans
	predisbursed as the fields partners are more confident that
	they will be backfilled in time.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;&lt;b&gt;Efficient loan funding is therefore beneficial to the Kiva
    ecosystem as a whole&lt;/b&gt;. This is especially true in times when the total amount of
    loan requests exceeds the available money in the system.&lt;/p&gt;

    &lt;p&gt;By the way,
    Kiva loans being interest free, there is no other built-in
    mechanism for steering offer and demand, than trust, benevolence
    and advertizing &amp;mdash;  whether by word of mouth or otherwise.&lt;/p&gt;

    &lt;h3&gt;The downside of Kiva&#39;s growth: non-backfilled loans&lt;/h3&gt;

    &lt;p&gt;In terms of growth, Kiva has been a phenomenal success. Since
    its start in 2005, the number of loan requests has risen year after year. In the
    early years, there seems to have been enough available money in the
    system to fully backfill most, if not all loan requests. However, &lt;b&gt;since
    2012, a significant number of predisbursed loans do not get
    backfilled&lt;/b&gt;, as is illustrated below.&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/nr_loans_per_quarter.png&quot; style=&quot;margin-top:20px; margin-bottom:20px;&quot; /&gt;
      &lt;figcaption&gt;Per-quarter bar chart of loan requests in period 2006-2014&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;p&gt;The rising number of non-backfilled loans since 2012 may be due to the
    relative lack of fresh inflowing capital from Kiva lenders, and/or to
    an intrinsic deterioration of loan quality. Whichever the reason,
    it is unknown if, to what extent and how soon the rising proportion of
    non-backfilled loans has translated into a growing refusal of
      loan requests by the field partners to predisburse loans in the
      first place: no data are currently available to test either of these
    hypotheses. But from the 
      field partners&#39; perspective, &lt;b&gt;there must
      be an inherent limit to increase their
      own capital and incur more risk&lt;/b&gt;. In a system with acceptable
    risk-taking, any transgression of this limit must
      eventually &lt;b&gt;hamper the (invisible) predisbursal rate of initial loan
      requests, &lt;em&gt;including valid ones&lt;/em&gt;&lt;/b&gt;.&lt;/p&gt;

    &lt;p&gt;Especially male borrowers are lagging behind. Not
    only have they historically entered the Kiva system less
    frequently than females; 
    but since 2012,
    loans to male borrowers have proportionally had a harder time
    getting backfilled 
    than loans predisbursed to females.&lt;/p&gt;

    &lt;p&gt;&lt;b&gt;Irrespective of the amount of money present in the
    Kiva ecosystem at any moment, we should at least try to make the
    available funds flow as efficiently as possible&lt;/b&gt;.&lt;/p&gt; 

    &lt;h3&gt;Kiva micro-finance is big&lt;/h3&gt;

    &lt;p&gt;As a final introductory note, let&#39;s
    visualize &lt;a href=&quot;sankey.html&quot; target=&quot;_&quot;&gt;how money 
    flows through the global Kiva ecosystem&lt;/a&gt;. The interactive
    &lt;a href=&quot;http://en.wikipedia.org/wiki/Sankey_diagram&quot; target=&quot;_&quot;&gt;Sankey diagram&lt;/a&gt;
    below summarizes, for the period 2012 through 2014, the
    money flows between lenders and borrowers. In these three years,
    more than &lt;b&gt;321 million dollars&lt;/b&gt; have been lent &amp;mdash; and then
    (hopefully) repaid.&lt;/p&gt;
    &lt;p&gt; The connections in the center &amp;quot;column&amp;quot; shows the
    country-to-country money flows. The left and right column do not
    really represent flows; they rather group the countries by region,
    respectively from the lenders&#39; and the borrowers&#39; perspective.&lt;/p&gt;

    &lt;p&gt;To see the dollar amounts, simply hover with the mouse over the
    graph. After a second or two, a popup will appear.&lt;/p&gt;
      
    &lt;div id=&quot;sankey_container&quot; style=&quot;margin-top:20px; margin-bottom:40px; border-width:0px;border-style:solid;border-color:black;&quot;&gt;

    &lt;h4 style=&quot;margin-top:20px; margin-bottom:20px;&quot; align=&quot;center&quot;&gt;Kiva microloans, grouped per region and country&lt;br /&gt;
    (2012-2014, combined)&lt;/h4&gt;

    &lt;div id=&quot;heading&quot;&gt;
      &lt;div class=&quot;header&quot; id=&quot;lending_region&quot;&gt;Lending Regions&lt;/div&gt;
      &lt;div class=&quot;header&quot; id=&quot;lending_country&quot;&gt;Lending Countries&lt;/div&gt;
      &lt;div class=&quot;header&quot; id=&quot;borrowing_country&quot;&gt;Borrowing Countries&lt;/div&gt;
      &lt;div class=&quot;header&quot; id=&quot;borrowing_region&quot;&gt;Borrowing Regions&lt;/div&gt;
    &lt;/div&gt;
    &lt;div id=&quot;loanFlowChart&quot;&gt;&lt;/div&gt;
    &lt;div style=&quot;float:left; text-align:left;&quot;&gt;&lt;small&gt;[This &lt;a href=&quot;http://d3js.org/&quot; target=&quot;_blank&quot;&gt;D3&lt;/a&gt; &lt;a href=&quot;http://bost.ocks.org/mike/sankey/&quot; target=&quot;_blank&quot;&gt;Sankey Diagram&lt;/a&gt; is inspired
    by &lt;a href=&quot;https://apps.carleton.edu/career/visualize/&quot; target=&quot;_blank&quot;&gt;Carleton College Career Path]&lt;/a&gt;&lt;/small&gt;&lt;/div&gt;

    &lt;div style=&quot;float:right; text-align:right;&quot;&gt;&lt;small&gt;[&lt;a href=&quot;sankey.html&quot; target=&quot;_blank&quot;&gt;Open in separate window&lt;/a&gt;]&lt;/small&gt;&lt;/div&gt;

    &lt;/div&gt;&lt;!-- sankey_container --&gt;

    &lt;p style=&quot;clear:both&quot;&gt;
    All figures are calculated from
    a &lt;a href=&quot;http://build.kiva.org/&quot; target=&quot;_&quot;&gt;Kiva JSON data
    snapshot&lt;/a&gt; downloaded on February 17, 2015. The software code
    is available on &lt;a href=&quot;https://github.com/fdurant/kiva_project/tree/master/d3&quot; target=&quot;_&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt; 

    &lt;p&gt;Now that the stage is set, let&#39;s define our problem more precisely.&lt;/p&gt;

    &lt;h2&gt;Business goal: optimal money flow, by predicting the funding
    of new loan requests&lt;/h2&gt;

    &lt;p&gt;
    The &lt;b&gt;business goal&lt;/b&gt; in this project is to &lt;b&gt;reduce the amount of
    non-productive, sleeping
    money in the system&lt;/b&gt;.&lt;/p&gt;

    &lt;p&gt;The main observation is that &lt;b&gt;it is
    better for X% of loans to be 100% funded, than for 100% of loans
    to be funded at X% each.&lt;/b&gt; In the latter (granted, somewhat
    extreme) case, following Kiva policy, all funds would simply
    return to the lenders. This means that not a single loan would be backfilled!&lt;/p&gt;

    &lt;p&gt;
    To reach this business goal, I propose a tool that
    provides an &lt;b&gt;a priori insight into the chance of a loan request
    being fully funded&lt;/b&gt; by available Kiva lender money. Next to
    that, this study aims to uncover &lt;b&gt;actionable insights&lt;/b&gt; to the
    concerned parties, who may benefit as follows:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Field partners and borrowers can work together to &lt;b&gt;adapt certain
	characteristics of a loan request&lt;/b&gt; in order to increase its
	chance of being funded.&lt;/li&gt;
      &lt;li&gt;Field partners and/or the Kiva platform can &lt;b&gt;promote certain
      loan requests&lt;/b&gt;, in the interest of system
      efficiency. This way they can avoid or mitigate the &amp;quot;many
      loans &lt;em&gt;almost&lt;/em&gt; funded&amp;quot; trap.&lt;/li&gt;
      &lt;li&gt;Lenders may want to know up-front if their money is going
      to &lt;b&gt;fund a &amp;quot;winning&amp;quot; loan request&lt;/b&gt;, and adapt their
      decisions accordingly.&lt;/li&gt;
    &lt;/ul&gt;

    

      &lt;p&gt;&lt;b&gt;Disclaimer&lt;/b&gt;:
    I am fully aware that each of these uses are &lt;b&gt;possibly
    controversial&lt;/b&gt;. They might indeed carry unintended
    side-effects, such as information asymmetry, perceived or real
    favoritism, and, in the worst case, intentional misrepresentation of
    loan characteristics. Since trust and transparancy are key values for Kiva
    &amp;mdash; or any other finance system, for that matter &amp;mdash;
    any potential deployment into a global production setting should only happen after careful
    analysis of the risks and benefits involved. &lt;b&gt;In the framework
    of this 4-week final
    project, I make no further statements about this important
    question&lt;/b&gt;. By the way, and for the record:
    Kiva.org was not informed about this project before it was
    completed and published here.&lt;/p&gt;

    &lt;h3&gt;Solution architecture&lt;/h3&gt;

    &lt;p&gt;My technical solution consists of 4 main components:
      &lt;ul&gt;
	&lt;li&gt;Web services offered by &lt;a href=&quot;http://kiva.org/&quot; target=&quot;_&quot;&gt;kiva.org&lt;/a&gt;,
	for &lt;a href=&quot;http://build.kiva.org/&quot; target=&quot;_&quot;&gt;offline&lt;/a&gt; and &lt;a href=&quot;http://build.kiva.org/api&quot; target=&quot;_&quot;&gt;online&lt;/a&gt; data retrieval&lt;/li&gt;
	&lt;li&gt;An offline process for training and evaluating the predictor&lt;/li&gt;
	&lt;li&gt;A live predictor, deployed in the cloud&lt;/li&gt;
	&lt;li&gt;A web browser (Google Chrome) with a self-developed extension that virtually integrates all
	solution elements&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/kiva_loan_funding_predictor_architecture.png&quot; style=&quot;margin-top:20px; margin-bottom:20px;&quot; /&gt;
      &lt;figcaption&gt;Architectural overview of the end-to-end loan funding
      predictor solution&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;p&gt;I now elaborate on each component, following
    the steps (1-6) in which they come into play. This description is somewhat
    idealistic, in that the real-life R&amp;amp;D process was more of a
    agile and iterative nature.&lt;/p&gt;

    &lt;p&gt;All code is available
    on &lt;a href=&quot;https://github.com/fdurant/kiva_project&quot; target=&quot;_&quot;&gt;GitHub&lt;/a&gt;. Steps 1 and 2 were run from
    an &lt;a href=&quot;http://nbviewer.ipython.org/github/fdurant/kiva_project/blob/master/Kiva_predicting_loan_funding.ipynb&quot; target=&quot;_&quot;&gt;iPython notebook&lt;/a&gt;.&lt;/p&gt;

    &lt;h2&gt;Step 1: Data Preparation&lt;/h2&gt;

    &lt;table&gt;
      &lt;tr&gt;
	&lt;th&gt;Technology&lt;/th&gt;
	&lt;th&gt;Used for&lt;/th&gt;
	&lt;th&gt;Useful for&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://www.mongodb.org/&quot; target=&quot;_&quot;&gt;MongoDB&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Local storage of documents/objects in the &lt;a href=&quot;http://build.kiva.org&quot; target=&quot;_&quot;&gt;Kiva JSON snapshot&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Selection of loans from specific years&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://github.com/saffsd/langid.py&quot; target=&quot;_&quot;&gt;langid.py&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Language identification of Kiva loan descriptions&lt;/td&gt;
	&lt;td&gt;Correcting erroneous language identification by Kiva, due
	to mixed original versions and their translations&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;http://pandas.pydata.org&quot; target=&quot;_&quot;&gt;Pandas&lt;/a&gt;
	and &lt;a href=&quot;http://www.numpy.org&quot; target=&quot;_&quot;&gt;numpy&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Efficient storage of (mostly numeric) data points&lt;/td&gt;
	&lt;td&gt;Training and test data for supervised learning&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;http://matplotlib.org&quot; target=&quot;_&quot;&gt;Matplotlib&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Plotting data&lt;/td&gt;
	&lt;td&gt;Producing the loan bar chart, split per gender and
	quarter (see above), and feature polarity graphs (see below)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://radimrehurek.com/gensim/&quot; target=&quot;_&quot;&gt;gensim&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Conversion of loan descriptions to a bag-of-words
	representation&lt;/td&gt;
	&lt;td&gt;Formatting these data in Blei Corpus Format, readable by
	SLDA (see below)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://github.com/chbrown/slda&quot; target=&quot;_&quot;&gt;SLDA&lt;/a&gt; (Supervised Latent Dirichlet Allocation)&lt;/td&gt;
	&lt;td&gt;Training and evaluation of an &lt;em&gt;auxiliary&lt;/em&gt; topic model&lt;/td&gt;
	&lt;td&gt;Reduction of 1000-dimensional bag-of-words vectors from the
	loan descriptions to 20 features (distribution over topics)&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;

    &lt;p&gt;In preparation of a previous project, I had already downloaded
    a Kiva snapshot of approximately 775.000 loans and their
    respective lenders on February 17,
    2015. The data are reused in this project.&lt;/p&gt;

    &lt;h2&gt;Step 2: Predictor/classifier training and evaluation&lt;/h2&gt;

    &lt;table&gt;
      &lt;tr&gt;
	&lt;th&gt;Technology&lt;/th&gt;
	&lt;th&gt;Used for&lt;/th&gt;
	&lt;th&gt;Useful for&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;http://scikit-learn.org/&quot; target=&quot;_&quot;&gt;Scikit-learn&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Training and evaluating a logistic regression model&lt;/td&gt;
	&lt;td&gt;Producing predictions and (rankable) prediction scores
	between 0-1&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://docs.python.org/2/library/pickle.html&quot; target=&quot;_&quot;&gt;pickle&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Serialization of the trained model&lt;/td&gt;
	&lt;td&gt;Deployment to the live web app&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;

    &lt;h3&gt;Feature creation&lt;/h3&gt;

    &lt;p&gt;
      Three types of input features were extracted and/or derived from the JSON snapshot:
      &lt;ul&gt;
	&lt;li&gt;19 &lt;b&gt;loan features&lt;/b&gt; extracted from
	the &lt;a href=&quot;http://api.kivaws.org/v1/loans/844974.json&quot; target=&quot;_&quot;&gt;JSON representation&lt;/a&gt; of a &lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_&quot;&gt;Kiva loan&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;20 &lt;b&gt;topic model features&lt;/b&gt; inferred for each loan
	from a Supervised Latent Dirichlet
	Allocation model that I created on the side&lt;/li&gt;
	&lt;li&gt;4 &lt;b&gt;partner features&lt;/b&gt; extracted from the &lt;a href=&quot;http://api.kivaws.org/v1/partners.json&quot; target=&quot;_&quot;&gt;JSON
	representation&lt;/a&gt; of
	the &lt;a href=&quot;http://api.kivaws.org/v1/partners.html&quot; target=&quot;_&quot;&gt;Kiva partner list&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;The to-be-predicted label is defined as follows: divide the actual
    &amp;quot;funded_amount&amp;quot; by the requested &amp;quot;loan_amount&amp;quot;. If this
    ratio is greater than or equal to 1, the loan is fully funded
    (&lt;b&gt;label 1&lt;/b&gt;). If not, the loan is not fully funded (&lt;b&gt;label 0&lt;/b&gt;).
      &lt;ul&gt;&lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;The data set consists of &lt;b&gt;all&lt;/b&gt; usable loans from the years 2012
    through 2014: &lt;b&gt;21 K negative and 420 K positive&lt;/b&gt;
    instances. This a priori 20/1 ratio calls for
    careful &lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html&quot; target=&quot;_&quot;&gt;class weight settings&lt;/a&gt; during 
      model training.&lt;/p&gt;

    &lt;h3&gt;Model training&lt;/h3&gt;

    &lt;p&gt;From the outset, it was my plan to fit
    a &lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html&quot; target=&quot;_&quot;&gt;logistic regression&lt;/a&gt; model 
    against the training data, using 10-fold cross validation. The
    chosen &lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html&quot; target=&quot;_&quot;&gt;class weight setting is &#39;auto&#39;&lt;/a&gt;, which should compensate
    for the strong predicted label imbalance in the training set. I also included
    some experimentation with varying regularization parameters. Since
    my prime goal in this project is to &lt;b&gt;deliver an end-to-end
    system, rather than
    only &lt;a href=&quot;http://www.vogue.com/1066581/supermodel-workouts-and-trainers/&quot; target=&quot;_&quot;&gt;an optimally trained &amp;quot;supermodel&amp;quot;&lt;/a&gt;&lt;/b&gt;, I did not try 
    out any other algorithm here. This pragmatic choice helped us maintain
    focus throughout the project.&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/optimally_trained_supermodel.jpg&quot; /&gt;
      &lt;figcaption&gt;Depiction of an optimally trained supermodel (source:
      &lt;a href=&quot;http://www.vogue.com/1066581/supermodel-workouts-and-trainers/&quot; target=&quot;_&quot;&gt;Vogue.com&lt;/a&gt;)&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;h3&gt;Incremental feature contribution to model performance&lt;/h3&gt;

    &lt;p&gt;As evaluation metric, I chose
    the &lt;a href=&quot;http://en.wikipedia.org/wiki/Receiver_operating_characteristic&quot; target=&quot;_&quot;&gt;ROC&lt;/a&gt; &lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html&quot; target=&quot;_&quot;&gt;area under the curve&lt;/a&gt;. To detect the &lt;b&gt;most
    informative feature groups&lt;/b&gt;, I started, in a 10-fold cross validation setting, 
      from an information-less
    baseline model with 50% ROC AUC performance. I then tested each
    of the remaining feature groups independently, selecting the best one
    as the
    &amp;quot;constant&amp;quot; feature group for the next round. There, it
    was on its turn combined with
    each of the remaining feature groups; again, a winner was
    selected and added to the ranked list of feature groups. The
    end result of this iterative process is the following &lt;b&gt;feature group ranking&lt;/b&gt;,
    in descending order of &lt;b&gt;marginal contribution&lt;/b&gt;:&lt;/p&gt; 

    &lt;table&gt;
      &lt;tr&gt;
	&lt;th&gt;Type&lt;/th&gt;
	&lt;th&gt;Feature group&lt;/th&gt;
	&lt;th&gt;ROC AUC&lt;/th&gt;
	&lt;th&gt;Percentage point improvement&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&amp;mdash;&lt;/td&gt;
	&lt;td&gt;Baseline&lt;/td&gt;
	&lt;td&gt;50.00 &amp;#37;&lt;/td&gt;
	&lt;td&gt;&amp;mdash;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;Log10LoanAmount&lt;/td&gt;
	&lt;td&gt;76,50 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 26.50&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;SDLA&lt;/td&gt;
	&lt;td&gt;20 loan description topics&lt;/td&gt;
	&lt;td&gt;80.72 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 4.22&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;PostedMonth[Jan..Dec]&lt;/td&gt;
	&lt;td&gt;83.55 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 2.83&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;MajorityGender&lt;/td&gt;
	&lt;td&gt;85.99 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 2.44&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;Log10NumberOfBorrowers&lt;/td&gt;
	&lt;td&gt;87.13 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 1.14&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Partner&lt;/td&gt;
	&lt;td&gt;LoansPosted &amp;amp; TotalAmountRaised&lt;/td&gt;
	&lt;td&gt;87.42 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 0.29&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;GeoLongitude &amp;amp; GeoLatitude&lt;/td&gt;
	&lt;td&gt;87.63 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 0.21&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;RepaymentTerm&lt;/td&gt;
	&lt;td&gt;87.77 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 0.14&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Partner&lt;/td&gt;
	&lt;td&gt;DelinquencyRate &amp;amp; Rating&lt;/td&gt;
	&lt;td&gt;87.77 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 0.00&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Loan&lt;/td&gt;
	&lt;td&gt;BonusCreditElegibility&lt;/td&gt;
	&lt;td&gt;87.82 &amp;#37;&lt;/td&gt;
	&lt;td&gt;+ 0.05&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;

    &lt;p&gt;A few observations:
      &lt;ul&gt;
	&lt;li&gt;The mere combination of the &lt;b&gt;four best feature groups&lt;/b&gt;
	already achieves &lt;b&gt;85.99%&lt;/b&gt; of ROC AUC. The additional six feature
	groups add less than 3 percentage points.&lt;/li&gt;
	&lt;li&gt;Given the abovementioned difference between male and
	female borrowers, we expected &lt;b&gt;gender of the borrower&lt;/b&gt;
	&amp;mdash; or, more generally and precisely,
	of the &lt;em&gt;majority&lt;/em&gt; of borrowers &amp;mdash; to be among the most
	informative features. This is confirmed, but it is somewhat surprising
	that the &lt;b&gt;20-dimensional semantic contents of the loan
	description&lt;/b&gt; is even more informative. A plausible
	explanation is that &lt;b&gt;gender is partially encoded in various implicit
	and explicit ways in the loan description&lt;/b&gt;. Check for yourself,
	as an example, in
	this &lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_&quot;&gt;female&lt;/a&gt;
	and &lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_&quot;&gt;male&lt;/a&gt; loan description for explicit
	gender-specific clues like pronouns. The implicit ones may be
	hidden inside particular types of gender-specific activities
	or textual clues (not further
	mined in this project).&lt;/li&gt;
	&lt;li&gt;The &lt;b&gt;month&lt;/b&gt; in which a loan request is posted is also highly
	informative. This was already apparent from the histogram
	above, where the second and third quarter of each year
	show a spike in loan requests, which has an impact on the
	backfill ratio.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;Also of interest is the feature polarity, i.e. whether a feature
    influences a positive prediction (= full funding) in the positive
    or negative sense. Let&#39;s look successively at the 
    &amp;quot;PostedMonth&amp;quot; features, the topic features, and all the
    other ones.&lt;/p&gt;

    &lt;h3&gt;What is the optimal time of year to post a loan?&lt;/h3&gt;

    &lt;p&gt;All other things being equal, it is easier to get loans fully funded that are posted in the &lt;b&gt;first
    three months&lt;/b&gt; of the calendar year. September and June are the least
    advantageous.&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/LogRes_Model_Coefficients_Months.png&quot; /&gt;
      &lt;figcaption&gt;Overview of PostedMonth[Jan..Dec] features with their
      respective logistic regression model coefficients, ranked from
      left to right in descending order&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;h3&gt;What is the impact of the topics found in the loan descriptions?&lt;/h3&gt;

    &lt;p&gt;Twelve topics contribute positively towards full funding, the
    remaining eight negatively. The extent to which a &lt;b&gt;&lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_&quot;&gt;specific
    loan description&lt;/a&gt;&lt;/b&gt; contributes in either direction, of course
    also depends of
    on the actual &lt;b&gt;distribution of topics&lt;/b&gt; found in that
    particular document.&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/LogRes_Model_Coefficients_Topics.png&quot; /&gt;
      &lt;figcaption&gt;Overview of 20 topic features with their
      respective logistic regression model coefficients, ranked from
      left to right in descending order &amp;mdash;
      [&lt;a href=&quot;/images/LogRes_Model_Coefficients_Topics.png&quot; target=&quot;_&quot;&gt;for better viewing, click here to open the graph in a
      separate window&lt;/a&gt;]&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;p&gt;Each topic is represented here by its ten most prominent words.&lt;/p&gt;

    &lt;h3&gt;And what about the other features?&lt;/h3&gt;

    &lt;p&gt;A &lt;b&gt;positive&lt;/b&gt; contributor to full funding is the &lt;b&gt;total amount of
    money raised by the field partner&lt;/b&gt;: this can be interpreted as a proxy
      for the partner&#39;s longevity and reliability. On the other hand,
    the &lt;b&gt;number of loans&lt;/b&gt; (LoansPosted)
    that went through that same field partner&#39;s hands &lt;b&gt;negatively&lt;/b&gt;
    impacts full funding - strangely so.&lt;/p&gt;

    &lt;p&gt;&lt;b&gt;The more borrowers&lt;/b&gt; take part in a loan request, &lt;b&gt;the better its
    chanches&lt;/b&gt; to get fully funded. This can be interpreted as a form
    of risk reduction, the idea being that multiple borrowers
    will help and/or control each other, thereby increasing loan
    quality. Otherwise said: lenders tend to appreciate and foster collaboration
    between borrowers - with their money.&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/LogRes_Model_Coefficients_Other_Features.png&quot; /&gt;
      &lt;figcaption&gt;Overview of the remaining features with their
      respective logistic regression model coefficients, ranked from
      left to right in descending order&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;p&gt;In my system, gender is encoded as female=0, and male=1. The
    negative impact of the MajorityGender feature therefore confirms
    the initial hypothesis that &lt;b&gt;male borrowers have a harder time
    getting their predisbursed loan requests backfilled&lt;/b&gt;.&lt;/p&gt;

    &lt;p&gt;The feature with the &lt;b&gt;most important negative impact&lt;/b&gt; across the
    whole feature set (&lt;em&gt;including&lt;/em&gt; PostedMonth and topic features) is
    the loan amount: &lt;b&gt;the more money is requested, the harder it
    is to get the loan fully funded&lt;/b&gt;. Assuming a constant allocatable
    sum per lender at a particular moment in time, it is logical that
    more lenders are required then to backfill a larger loan amount. If
    not enough lenders are found within the expiration period, the loan does
    not get fully funded.&lt;/p&gt;

    &lt;h3&gt;Code organization for easy deployment&lt;/h3&gt;

    &lt;p&gt;In order to facilitate deployment of the model in a live
    setting, and maximize code reuse, all
    relevant data preprocessing, feature creation (especially for SLDA),
    and feature scaling functionality was cleanly implemented in separate Python modules:
      &lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/SldaTextFeatureGenerator.py&quot; target=&quot;_&quot;&gt;SldaTextFeatureGenerator&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/KivaLoan.py&quot; target=&quot;_&quot;&gt;KivaLoan&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/KivaLoans.py&quot; target=&quot;_&quot;&gt;KivaLoans&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/KivaPartner.py&quot; target=&quot;_&quot;&gt;KivaPartner&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/KivaPartners.py&quot; target=&quot;_&quot;&gt;KivaPartners&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/KivaLoanFundingPredictor.py&quot; target=&quot;_&quot;&gt;KivaLoanFundingPredictor&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;
      Finally, the best performing model
      was &lt;a href=&quot;https://docs.python.org/2/library/pickle.html&quot; target=&quot;_&quot;&gt;pickled&lt;/a&gt; and &lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/data/predicting_funding/logres_out/kivaLoanFundingPredictor.pkl&quot; target=&quot;_&quot;&gt;stored in GitHub&lt;/a&gt;.
      The main script that runs model training and evaluation is
      &lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/loan_funding_predictor.py&quot; target=&quot;_&quot;&gt;loan_funding_predictor.py&lt;/a&gt;. See the &lt;a href=&quot;http://nbviewer.ipython.org/github/fdurant/kiva_project/blob/master/Kiva_predicting_loan_funding.ipynb&quot; target=&quot;_&quot;&gt;iPython notebook&lt;/a&gt; for its usage.
    &lt;/p&gt;

    &lt;h2&gt;Step 3: Deployment of the predictor to the live back-end&lt;/h2&gt;

    &lt;table&gt;
      &lt;tr&gt;
	&lt;th&gt;Technology&lt;/th&gt;
	&lt;th&gt;Used for&lt;/th&gt;
	&lt;th&gt;Useful for&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://github.com/fdurant/kiva_project/tree/master/data/predicting_funding/logres_out&quot; target=&quot;_&quot;&gt;GitHub&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Storage of the best performing model&lt;/td&gt;
	&lt;td&gt;Lightweight deployment to the (until further notice transient) cloud environment&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://docs.python.org/2/library/pickle.html&quot; target=&quot;_&quot;&gt;pickle&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Deserialization of the trained model&lt;/td&gt;
	&lt;td&gt;Loading the trained model in the live web app&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;https://github.com/chbrown/slda&quot; target=&quot;_&quot;&gt;SLDA&lt;/a&gt; (Supervised Latent Dirichlet Allocation)&lt;/td&gt;
	&lt;td&gt;Inference of gamma values against a pre-trained auxiliary
	topic model&lt;/td&gt;
	&lt;td&gt;On-the-fly feature generation for previously unseen loan descriptions&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;&lt;a href=&quot;http://flask.pocoo.org/&quot; target=&quot;_&quot;&gt;Flask&lt;/a&gt;
	and &lt;a href=&quot;https://flask-restful.readthedocs.org/&quot; target=&quot;_&quot;&gt;Flask-RESTful&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Setup of live RESTful web application&lt;/td&gt;
	&lt;td&gt;Serving on-the-fly predictions for previously unseen Kiva loan requests&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;

    &lt;p&gt;Deployment of the software and prediction model to the virtual machine
      at &lt;a href=&quot;https://www.digitalocean.com&quot; target=&quot;_&quot;&gt;Digital Ocean&lt;/a&gt;
      was simply done by logging onto that machine, and pulling all
      relevant files from GitHub. The trained model itself
      was &lt;a href=&quot;https://docs.python.org/2/library/pickle.html&quot; target=&quot;_&quot;&gt;unpickled&lt;/a&gt; and loaded into
      a &lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/predictLoanFundingWebApp.py&quot; target=&quot;_&quot;&gt;Flask-based web application&lt;/a&gt;. Obviously, the
      virtual box also includes preinstalled copies of Python, all
      required libraries
      (including &lt;a href=&quot;https://github.com/fdurant/kiva_project/blob/master/src/predictLoanFundingWebApp.py&quot; target=&quot;_&quot;&gt;sklearn&lt;/a&gt;), and a precompiled &lt;a href=&quot;https://github.com/chbrown/slda&quot; target=&quot;_&quot;&gt;slda&lt;/a&gt; binary.&lt;/p&gt;

    &lt;h2&gt;Step 4: Getting a loan page from Kiva&lt;/h2&gt;

    &lt;p&gt;This step is simply a retrieval of a
    new &lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_&quot;&gt;loan page
    from the Kiva website&lt;/a&gt;. Kiva offers its lenders a constant stream
    of &lt;a href=&quot;http://www.kiva.org/browse&quot; target=&quot;_&quot;&gt;recently
    predisbursed loan requests&lt;/a&gt; from which to choose.&lt;/p&gt;

    &lt;p&gt;The following steps describe how we can &amp;mdash; at least
    virtually &amp;mdash; &lt;b&gt;augment each loan page with live information
    from the loan funding predictor&lt;/b&gt;.&lt;/p&gt;

    &lt;h2&gt;Step 5: Getting a prediction from the live back-end&lt;/h2&gt;

    &lt;p&gt;
      &lt;b&gt;Disclaimer&lt;/b&gt;: at the time of writing, and until further
      notice, the live environment is not 
      meant to be running permanently. The backend will only be live
      during planned demonstrations.
    &lt;/p&gt;

    &lt;p&gt;A typical backend request-response cycle looks like this:&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/loan_funding_prediction_REST_request_response.png&quot; style=&quot;border-style:solid;border-width:1px;&quot; /&gt;
      &lt;figcaption&gt;Example request and JSON response of the live
      predictor, with highlighted fields (blue) and topic gamma
      values (orange)&lt;/figcaption&gt;
    &lt;/figure&gt;

    &lt;p&gt;Each loan funding prediction response returns:
    &lt;ul&gt;
      &lt;li&gt;the &lt;b&gt;prediction&lt;/b&gt;: 0 (not fully funded) or 1 (fully funded)&lt;/li&gt;
      &lt;li&gt;the &lt;b&gt;loan funding score&lt;/b&gt;: a floating point number between 0 and 1&lt;/li&gt;
      &lt;li&gt;the &lt;b&gt;topic scores&lt;/b&gt;: a list of 20 topics for the loan
	description at hand, ranked by descending
	&lt;a href=&quot;https://www.cs.princeton.edu/~blei/papers/BleiMcAuliffe2007.pdf&quot; target=&quot;_&quot;&gt;gamma value&lt;/a&gt; (prominence).&lt;/li&gt;
    &lt;/ul&gt;
    &lt;/p&gt;
    &lt;p&gt;
	Again, each topic is
	represented by its 10 most prominent words. In isolation, the gamma values say
	nothing about the propensity of a given loan to get funded or not.
	As explained earlier, the polarity or direction of the
	relationship between each topic and the class label is
	captured in the logistic regression model. At prediction time,
	the loan document&#39;s
	gamma values serve as input to the logistic
	regression model.
	This prediction happens together with all the other features in one go,
	of course.&lt;/p&gt;

    &lt;h2&gt;Step 6: Getting Kiva&#39;s information on a new loan&lt;/h2&gt;

    &lt;p&gt;Before the predictor could send the abovementioned response, it
    obviously needed some loan information to work on. In the current
    architecture, the predictor web 
    application
    itself &lt;a href=&quot;http://api.kivaws.org/v1/loans/844974.json&quot; target=&quot;_&quot;&gt;reaches out to the Kiva REST API&lt;/a&gt;, to get all
    relevant loan information on the fly.&lt;/p&gt;

    &lt;h2&gt;Step 4 revisited: visual integration in Google Chrome&lt;/h2&gt;

    &lt;table&gt;
      &lt;tr&gt;
	&lt;th&gt;Technology&lt;/th&gt;
	&lt;th&gt;Used for&lt;/th&gt;
	&lt;th&gt;Useful for&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;Kango&lt;a href=&quot;http://kangoextensions.com/&quot; target=&quot;_&quot;&gt;&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Creating a Google Chrome browser extension&lt;/td&gt;
	&lt;td&gt;Virtual integration of the loan prediction info into a
	Kiva loan web page&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
	&lt;td&gt;jQuery&lt;a href=&quot;http://jquery.com&quot; target=&quot;_&quot;&gt;&lt;/a&gt;&lt;/td&gt;
	&lt;td&gt;Faster JavaScript development&lt;/td&gt;
	&lt;td&gt;Creating two DOM elements that display loan funding
	information on a Kiva loan web page&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    
    &lt;p&gt;To dynamically integrate the information received in step 5, I
    wrote
    a Google Chrome extension based
    on &lt;a href=&quot;http://kangoextensions.com/ &quot; target=&quot;_&quot;&gt;Kango&lt;/a&gt; and &lt;a href=&quot;https://jquery.com/&quot; target=&quot;_&quot;&gt;jQuery&lt;/a&gt;. Once it is &lt;a href=&quot;https://support.google.com/chrome_webstore/answer/2664769?hl=en&quot;&gt;installed&lt;/a&gt;
    and &lt;a href=&quot;https://support.google.com/chrome/answer/167997?hl=en&quot;&gt;activated&lt;/a&gt;,
    the &lt;a href=&quot;kivaloanfundingvisualization_0.1.0_chrome_webstore.zip&quot; target=&quot;_&quot;&gt;Kiva Loan Funding Visualization&lt;/a&gt; extension displays two
    new boxes inside any Kiva Loan page visited from that
    browser. It then looks like this:&lt;/p&gt;

    &lt;figure&gt;
      &lt;img src=&quot;/images/kiva_loan_page_with_augmented_prediction_info.png&quot; style=&quot;border-style:solid;border-width:1px;&quot; /&gt;
      &lt;figcaption&gt;Augmented Kiva loan web page, containing two extra blue
      boxes with on the fly predicted info&lt;/figcaption&gt;
    &lt;/figure&gt;    

    &lt;p&gt;The box in the upper-right corner contains the prediction
    score expressed as a (rounded) percentage, and a thumbs up/down image that
    represents the binary prediction. The treshold is currently set
    at 50%. The probability is called a priori, to stress that
    the &lt;em&gt;actual&lt;/em&gt; funding status (displayed by Kiva) does not play any role in
    the predicted value. In other words, the predictor would predict the same
    probability before, during or after the funding period - with one
    exception: the field partner features (e.g. LoansPosted), may have changed over time.&lt;/p&gt;
   
    &lt;p&gt;The box below the borrower&#39;s image contains the three most
    prominent topics for the loan (description) at hand.&lt;/p&gt;

    &lt;h2&gt;Conclusion and further work&lt;/h2&gt;

    &lt;p&gt;In this project, I have developed an end-to-end system that enables multiple
    actors in the Kiva ecosystem to get an a priori insight into the
    funding chances of previously unseen loans. While the current
    logistic regression model can no doubt be improved in various
    ways, its current  performance of 87.82% ROC Area Under Curve is
    sufficient for a proof of concept.&lt;/p&gt;

      &lt;p&gt;As the virtual
    integration through a browser extension demonstrates, the system can
    indeed be deployed with minimum extra engineering effort, should
    Kiva wish to do so.&lt;/p&gt;

    &lt;p&gt; At the same time,
    the positive or negative contribution of each feature was
    identified. This may help Kiva actors in the field to adapt certain
    behaviours or revise certain decision strategies, should they feel
    the need to do so.&lt;/p&gt;

    &lt;p&gt;As far as deployment in the Kiva ecosystem is concerned, then, there
      will be &lt;b&gt;more strategic and ethical questions to be answered,
      than technical ones&lt;/b&gt;.&lt;/p&gt;

    &lt;p&gt;Potential avenues for model performance improvement include:
      &lt;ul&gt;
	&lt;li&gt;A more refined and tuned Supervised Latent Dirichlet Allocation model&lt;/li&gt;
	&lt;li&gt;Different logistic regression settings&lt;/li&gt;
	&lt;li&gt;Alternative estimators&lt;/li&gt;
	&lt;li&gt;Additional and/or better features. I am especially interested in
	adding &amp;quot;trust&amp;quot; features detected from the borrower&#39;s
	  image. The reason is simple: when I made my first Kiva loan
	in February, the image contents played a major role in my own
	  choice.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;h2&gt;&lt;a name=&quot;kiva_research&quot;&gt;Research papers on Kiva&lt;/a&gt;&lt;/h2&gt;

    &lt;p&gt;
      &lt;ul&gt;
	&lt;li&gt;[&lt;a name=&quot;#jenq&quot;&gt;1&lt;/a&gt;] Christina Jenq, Jessica Pan and Walter Theseira: &lt;a href=&quot;http://riped.utcc.ac.th/wp-content/uploads/2012/03/Dr_Jessica_Pan_30_March_2012.pdf&quot; target=&quot;_&quot;&gt;What Do Donors Discriminate On? Evidence from Kiva.org&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;[&lt;a name=&quot;Choo_Lee_Lee_Zha_Park&quot;&gt;2&lt;/a&gt;]Jaegul Choo,
	Changhyun Lee, Daniel Lee, Hongyuan Zha and Haesun Park:
	&lt;a href=&quot;http://www.cc.gatech.edu/~joyfull/resources/2014_wsdm_kiva.pdf&quot; target=&quot;_&quot;&gt;Understanding and Promoting Micro-Finance Activities in Kiva.org&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;h2&gt;Acknowledgements&lt;/h2&gt;

    &lt;p&gt;Having come at the end of this bootcamp in New York City, I would like to thank:
      &lt;ul&gt;
	&lt;li&gt;my
    instructors &lt;a href=&quot;https://www.linkedin.com/pub/irmak-sirer/2a/752/846&quot; target=&quot;_&quot;&gt;Irmak
    Sirer&lt;/a&gt;, &lt;a href=&quot;https://www.linkedin.com/profile/view?id=92036474&quot; target=&quot;_&quot;&gt;Bo
    Peng&lt;/a&gt; and &lt;a href=&quot;https://www.linkedin.com/in/ajschumacher&quot; target=&quot;_&quot;&gt;Aaron Schumacher&lt;/a&gt; for having turned this Data
    Science Bootcamp into such an pleasant and rewarding
    experience. You guys rock!&lt;/li&gt;
	&lt;li&gt;my &lt;a href=&quot;https://krash.io/&quot; target=&quot;_&quot;&gt;Krash Brooklyn&lt;/a&gt; housemate and PhD
	candidate &lt;a href=&quot;https://www.linkedin.com/in/mgerritzen&quot; target=&quot;_&quot;&gt;Marc Gerritzen&lt;/a&gt; for
	his valuable comments on an earlier version of this blog
	post, and, more generally, his interest in this project.&lt;/li&gt;
	&lt;li&gt;all my fellow &lt;a href=&quot;http://www.thisismetis.com/ds-alumni&quot; target=&quot;_&quot;&gt;Metis Data Science students (Winter Cohort
	2015)&lt;/a&gt;, and my fellow &lt;a href=&quot;https://krash.io/&quot; target=&quot;_&quot;&gt;Krashers in Brooklyn&lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;my family and friends at home, for putting up with my three-month absence.&lt;/li&gt;
	&lt;li&gt;the amazing and awesome city and people of New York, for
	their inspiration and energy.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

  &lt;/body&gt;
&lt;/html&gt;


  &lt;p&gt;&lt;a href=&quot;/projects/kiva-loan-funding-predictor-project/&quot;&gt;An end-to-end loan funding predictor for kiva.org&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on April 07, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[A quick glance into 775 thousand Kiva borrower stories]]></title>
  <link rel="alternate" type="text/html" href="/projects/kiva-topic-modelling-project/" />
  <id>/projects/kiva-topic-modelling-project</id>
  <published>2015-03-13T08:00:00-04:00</published>
  <updated>2015-03-13T08:00:00-04:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;html lang=&quot;en&quot; ng-app=&quot;hierarchie&quot;&gt;
  &lt;head&gt;
  &lt;title&gt;Project: A quick glance into 775 thousand Kiva borrower stories&lt;/title&gt;
  &lt;!--script src=&quot;http://d3js.org/d3.v3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script--&gt;
  &lt;script src=&quot;http://d3js.org/d3.v3.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

  &lt;!-- Next elements added from Hierarchie--&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot; /&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;all&quot; href=&quot;app/css/app.css&quot; /&gt;
  &lt;link href=&quot;http://fonts.googleapis.com/css?family=Josefin+Slab:100,400&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
  &lt;link href=&quot;http://fonts.googleapis.com/css?family=Lato&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
  &lt;/head&gt;

  &lt;body&gt;
    
    &lt;p&gt;A few weeks ago, I made a microloan to political management student Yaqout from Al Hashmiya, Jordan.
      Twenty-three other lenders from around the globe did
      the same, reaching a total of $725. Yaqout will use the money to
      finance her next semester.&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;/images/yakout_from_jordan.jpg&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;The loan was facilitated by &lt;a href=&quot;http://www.kiva.org/&quot; target=&quot;_blank&quot;&gt;Kiva&lt;/a&gt;, a microfinance
      platform that has been around since 2005. In ten years, hundreds
      of thousands of borrowers like Yaqout have supported their loan
      application with a &lt;a href=&quot;http://www.kiva.org/lend/844974&quot; target=&quot;_blank&quot;&gt;personal story&lt;/a&gt; describing their ambitions and plans.&lt;/p&gt;

      &lt;p&gt;Over the years, Kiva have
      meticulously collected all these stories. What&#39;s more, they
      made them &lt;a href=&quot;http://build.kiva.org/&quot; target=&quot;_blank&quot;&gt;available for further application development and
      research&lt;/a&gt;. Perfect for a data science project!&lt;/p&gt;

    &lt;h2&gt;Topic modelling as a subgoal of natural language processing&lt;/h2&gt;

    &lt;p&gt;Over the past 2 1/2 weeks, the Metis Data Science Bootcamp
      introduced &lt;a href=&quot;http://en.wikipedia.org/wiki/Natural_language_processing&quot;&gt;Natural Language Processing&lt;/a&gt;
      (= NLP, not to be confused with
      &lt;a href=&quot;http://en.wikipedia.org/wiki/Neuro-linguistic_programming&quot; target=&quot;_blank&quot;&gt;Neuro-Linguistic Programming&lt;/a&gt;). One subgoal
      of NLP is to make it easier for humans to process and interpret huge amounts of
      text data.&lt;/p&gt;

    &lt;p&gt;While most earthlings nowadays
      routinely use &lt;a href=&quot;http://google.com/&quot; target=&quot;_blank&quot;&gt;text search&lt;/a&gt; (a.k.a. information retrieval),
      fewer are accustomed to getting (at least an impressionistic) insight into the contents of massive data collections.
      Yet, over the last 20 years,
      technologies like &lt;a href=&quot;http://en.wikipedia.org/wiki/Latent_semantic_indexing&quot;&gt;latent semantic indexing&lt;/a&gt; and
      more recently &lt;a href=&quot;http://www.cs.princeton.edu/~blei/papers/Blei2012.pdf&quot; target=&quot;_blank&quot;&gt;probabilistic topic
	models&lt;/a&gt; have been developed to precisely address this need.&lt;/p&gt;

    &lt;h2&gt;Kiva borrower stories at a glance&lt;/h2&gt;

    &lt;p&gt;With the help
    of &lt;a href=&quot;https://radimrehurek.com/gensim/&quot; target=&quot;_blank&quot;&gt;gensim&lt;/a&gt;, an excellent Python library for topic modelling,
    we extracted 64 topics from a corpus containing 775 thousand
    borrower stories. Please refer to
    our &lt;a href=&quot;http://nbviewer.ipython.org/github/fdurant/kiva_project/blob/master/hierarchical_topic_modelling_of_kiva_loan_descriptions.ipynb&quot; target=&quot;_&quot;&gt;iPython notebook&lt;/a&gt;
    and &lt;a href=&quot;https://github.com/fdurant/kiva_project&quot; target=&quot;_&quot;&gt;GitHub repository&lt;/a&gt; for details.&lt;/p&gt;
    
    &lt;p&gt;The end result of the topic modelling process is a topic
      hierarchy. To visualize it, we used
      the &lt;a href=&quot;http://mlvl.github.io/Hierarchie/#/about&quot;&gt;Hierarchie&lt;/a&gt; 
      system developed at/by the &lt;a href=&quot;http://www.dac.us/&quot;&gt;Decisive Analytics Corporation&lt;/a&gt;.&lt;/p&gt;

    &lt;p&gt;The &lt;a href=&quot;http://bl.ocks.org/mbostock/4348373&quot;&gt;zoomable
    sunburst&lt;/a&gt; graph below offers a bird&#39;s-eye view of the Kiva borrower stories. Each of the 64 outer segments 
    represents one core topic, which is expressed as a probability distribution over a vocabulary of 1000 words (excluding stop
      words and other very frequent words). From these
      1000 words, only the &lt;em&gt;seven&lt;/em&gt; most prominent ones are shown for each topic.
      The inner segments represent successive higher-abstract groupings of the core topics.&lt;/p&gt;

    &lt;p&gt;The breadcrumb arrow at the top left-hand side shows the path of all most prominent words visited, as you traverse
      the hierarchy from the central circle to the outer rings, and back.&lt;/p&gt;

    &lt;div ng-view=&quot;&quot;&gt;
      &lt;script src=&quot;bower_components/d3/d3.min.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;bower_components/angular/angular.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;bower_components/angular-route/angular-route.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;bower_components/underscore/underscore.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/app.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/routes.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/services.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/controllers.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/filters.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/directives.js&quot;&gt;&lt;/script&gt;		
      &lt;script src=&quot;app/js/directives/breadcrumb.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/directives/sunburst-perspective.js&quot;&gt;&lt;/script&gt;
      &lt;script src=&quot;app/js/directives/sunburst.js&quot;&gt;&lt;/script&gt;  
    &lt;/div&gt;

    &lt;p align=&quot;right&quot;&gt;&lt;small&gt;See &lt;a href=&quot;http://mlvl.github.io/Hierarchie/#/about&quot;&gt;Hierarchie intro&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;

    &lt;p&gt;The size of each segment represents the presence of this topic in the whole collection, i.e. across
      &lt;em&gt;all&lt;/em&gt; borrower stories. In probabilistic topic modelling, each document is indeed seen as having
      been generated by a probabilistic draw from &lt;em&gt;all&lt;/em&gt; topics in the data collection - with some
      topics being more prominent than others. Otherwise stated:
      no single document has an &lt;em&gt;exclusive&lt;/em&gt; relationship to a
      single topic, and vice versa.&lt;/p&gt;

    &lt;p&gt;The colors have no other purpose than to serve visual
    distinctiveness; they do not carry any meaning as such.&lt;/p&gt;

    &lt;/body&gt;

&lt;/html&gt;


  &lt;p&gt;&lt;a href=&quot;/projects/kiva-topic-modelling-project/&quot;&gt;A quick glance into 775 thousand Kiva borrower stories&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on March 13, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[Selling a new banking product to the right customers (first)]]></title>
  <link rel="alternate" type="text/html" href="/projects/banking-project/" />
  <id>/projects/banking-project</id>
  <published>2015-02-20T10:45:00-05:00</published>
  <updated>2015-02-20T10:45:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;html&gt;
  &lt;head&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;nv.d3.css&quot; /&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;my.css&quot; /&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;d3.slider.css&quot; /&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ProfitHeatMap.css&quot; /&gt;
  &lt;title&gt;Project: Target Marketing for a Bank&lt;/title&gt;
  &lt;!--script src=&quot;http://d3js.org/d3.v3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script--&gt;
  &lt;script src=&quot;http://d3js.org/d3.v3.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;!--script src=&quot;nv.d3.min.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script)--&gt;
  &lt;script src=&quot;nv.d3.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;d3.slider.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;p&gt;During week 4, 5 and 6, the Metis Data Science Bootcamp zoomed in on the following technologies:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;SQL and mySQL in the &lt;a href=&quot;https://www.digitalocean.com&quot; target=&quot;_blank&quot;&gt;cloud&lt;/a&gt; (0.5 day);&lt;/li&gt;
      &lt;li&gt;Supervised learning with &lt;a href=&quot;http://scikit-learn.org/&quot; target=&quot;_blank&quot;&gt;scikit-learn&lt;/a&gt;
	and &lt;a href=&quot;http://statsmodels.sourceforge.net/&quot; target=&quot;_blank&quot;&gt;statsmodels&lt;/a&gt; (1.5 week);&lt;/li&gt;
      &lt;li&gt;Interactive visualization with &lt;a href=&quot;http://matplotlib.org/&quot; target=&quot;_blank&quot;&gt;matplotlib&lt;/a&gt;, &lt;a href=&quot;http://nbviewer.ipython.org/github/esss/ipython/blob/master/examples/Interactive%20Widgets/Index.ipynb&quot; target=&quot;_blank&quot;&gt;interactive widgets in iPython&lt;/a&gt;, &lt;a href=&quot;http://mpld3.github.io/&quot; target=&quot;_blank&quot;&gt;mpld3&lt;/a&gt; and especially &lt;a href=&quot;http://d3js.org/&quot; target=&quot;_blank&quot;&gt;D3.js&lt;/a&gt; (1.5 week).&lt;/li&gt;
      
    &lt;/ul&gt;

    &lt;p&gt;The remainder of this article reports on the project and business context in which these technologies were applied.&lt;/p&gt;

    &lt;h2&gt;Business questions&lt;/h2&gt;

    &lt;p&gt;A bank wants to run a targeted marketing campaign in order to &lt;strong&gt;sell a term deposit product&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;Given a certain (but unspecified) &lt;strong&gt;campaign budget&lt;/strong&gt;:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Which customers&lt;/strong&gt; should it target?&lt;/li&gt;
      &lt;li&gt;In &lt;strong&gt;what order&lt;/strong&gt;?&lt;/li&gt;
      &lt;li&gt;Is it wise to spend the &lt;strong&gt;complete&lt;/strong&gt; campaign budget?&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The bank has a &lt;a href=&quot;https://archive.ics.uci.edu/ml/datasets/Bank+Marketing&quot; target=&quot;_blank&quot;&gt;database of 41K past customer 
	contact records&lt;/a&gt;, with an indication of successful and failed sales of this product.&lt;/p&gt;

    &lt;h2&gt;Technical assignment&lt;/h2&gt;

    &lt;p&gt;Using the historic customer database, build a model to:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;predict&lt;/strong&gt; which customers are (more) likely to buy the term deposit product&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;rank&lt;/strong&gt; customers by their propensity to buy the product&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;To evaluate model performance, produce for each machine learning algorithm:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;an &lt;a href=&quot;http://en.wikipedia.org/wiki/Receiver_operating_characteristic&quot; target=&quot;_blank&quot;&gt;ROC&lt;/a&gt; curve&lt;/li&gt;
      &lt;li&gt;a &lt;a href=&quot;http://en.wikipedia.org/wiki/Lift_(data_mining)&quot;&gt;lift&lt;/a&gt; curve&lt;/li&gt;
      &lt;li&gt;a profit visualization&lt;/li&gt;
    &lt;/ul&gt;

    &lt;h2&gt;Data preparation, feature selection and model building&lt;/h2&gt;

    &lt;p&gt;For these steps, please check the &lt;a href=&quot;http://nbviewer.ipython.org/github/fdurant/mcnulty_banking/blob/master/project_mcnulty_banking.ipynb&quot; target=&quot;_blank&quot;&gt;iPython notebook&lt;/a&gt;, also available in our &lt;a href=&quot;https://github.com/fdurant/mcnulty_banking&quot; target=&quot;_&quot;&gt;GitHub repository&lt;/a&gt;.&lt;/p&gt;

    &lt;h2&gt;Model evaluation&lt;/h2&gt;

    &lt;p&gt;How well do our models perform? And much more importantly: how do they contribute to answering the business questions?&lt;/p&gt;
    &lt;p&gt;Let&#39;s start by looking at the &lt;a href=&quot;http://en.wikipedia.org/wiki/Receiver_operating_characteristic&quot; target=&quot;_blank&quot;&gt;ROC curve&lt;/a&gt;.&lt;/p&gt;

    &lt;h3&gt;ROC curve: between a rock and a hard place&lt;/h3&gt;

    &lt;p&gt;Hint: move the mouse over the graph, to highlight individual line points&lt;/p&gt;

    &lt;svg id=&quot;roccurve&quot; style=&quot;height:400px; width:100%; border-style:solid; border-width:1px; border-color:black;&quot;&gt;&lt;/svg&gt;
    &lt;script src=&quot;ROCCurve.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
    &lt;p align=&quot;right&quot;&gt;&lt;small&gt;[&lt;a href=&quot;ROCCurve.html&quot; target=&quot;_roc&quot;&gt;view in separate window&lt;/a&gt;]&lt;/small&gt;&lt;/p&gt;

    &lt;p&gt;Inside the &lt;a href=&quot;http://en.wikipedia.org/wiki/False_positives_and_false_negatives&quot; target=&quot;_blank&quot;&gt;False Positive Rate&lt;/a&gt; intervals [0-0.07] and [0.54-1.00] (horizontal axis), the 
      &lt;a href=&quot;http://en.wikipedia.org/wiki/Logistic_regression&quot; target=&quot;_blank&quot;&gt;logistic regression&lt;/a&gt; model 
      scores best in terms of &lt;a href=&quot;http://en.wikipedia.org/wiki/False_positives_and_false_negatives#true_positive&quot; target=&quot;_blank&quot;&gt;True Positive Rate&lt;/a&gt; (vertical axis).
      In between these two intervals, &lt;a href=&quot;http://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm&quot; target=&quot;_blank&quot;&gt;KNN&lt;/a&gt; (with k = 30) is the winning model.
      But all in all, the three algorithms play in the same league.&lt;/p&gt;

    &lt;p&gt;The selection of a specific FPR/TPR combination (and of a corresponding best algorithm) is for our customer to make.
      In business terms, this means making a trade-off between:&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;Reaching sufficiently interested customers, which will bring in revenue&lt;/li&gt;
      &lt;li&gt;In the process, annoying too many uninterested ones, and incurring the cost of making these contact&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;On its own, the ROC curve does not tell us how to set the optimal threshold. Therefore, let&#39;s try to formulate the trade-off
      more &lt;strong&gt;in operational terms&lt;/strong&gt;,
      by means of a &lt;a href=&quot;http://en.wikipedia.org/wiki/Lift_(data_mining)&quot; target=&quot;_blank&quot;&gt;lift curve&lt;/a&gt;.&lt;/p&gt;

    &lt;h2 align=&quot;center&quot;&gt;Lift curve: trained model vs. baseline performance&lt;/h2&gt;

    &lt;p&gt;From our &lt;a href=&quot;https://archive.ics.uci.edu/ml/datasets/Bank+Marketing&quot; target=&quot;_blank&quot;&gt;reference dataset&lt;/a&gt;, we know that only a fraction (&amp;lt;10 &amp;#37;) of our potential customers will accept an
  offer to buy the term deposit product. The question, of course, is &lt;strong&gt;who&lt;/strong&gt; these customers are. For each customer
      in the test set, our trained models return a &lt;strong&gt;probability estimate&lt;/strong&gt; of their purchase of the product.
      This probability allows us to &lt;strong&gt;rank our customers&lt;/strong&gt; accordingly, which is key to making smart(er) decisions.&lt;/p&gt;

    &lt;p&gt;But first, for the sake of the argument, let&#39;s assume we only know the distribution of yes/no answers in the training data set,
      and nothing more. The (near-perfect) diagonal line from (0,0) to (100, 100) in the graph below
      represents such a baseline case. The model behind it was built by &lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.dummy.DummyClassifier.html&quot; target=&quot;_&quot;&gt;randomly guessing&lt;/a&gt;
      who might accept or reject the offer, according to this yes/no distribution.&lt;/p&gt;

    &lt;p&gt; So, in the baseline case, if we were to contact 20&amp;#37; of the customers (x axis), we can expect to
      hit approximately 20&amp;#37; of all customers &lt;em&gt;who would actually buy the product&lt;/em&gt; (y axis). This is approximately
      true for any other percentage point along this (near-perfect) diagonal.&lt;/p&gt;

    &lt;svg id=&quot;liftcurve&quot; style=&quot;height:400px; width:100%; border-style:solid; border-width:1px;&quot;&gt;&lt;/svg&gt;
    &lt;p align=&quot;right&quot;&gt;&lt;small&gt;[&lt;a href=&quot;LiftCurve.html&quot; target=&quot;_lift&quot;&gt;view in separate window&lt;/a&gt;]&lt;/small&gt;&lt;/p&gt;
    &lt;script src=&quot;LiftCurve.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;    

    &lt;p&gt;Luckily, we &lt;strong&gt;do&lt;/strong&gt; have more information, so we &lt;strong&gt;can&lt;/strong&gt; do better! For example, hover
      over data point (20.0, 63.2) on the upper KNN line. This data point means that by merely selecting the top-ranked
      &lt;strong&gt;one fifth&lt;/strong&gt; of our customers, we can expect to hit no less than &lt;strong&gt;two thirds&lt;/strong&gt; of all customers
      who would actually buy the product!&lt;/p&gt;
    &lt;p&gt;Each table that appears when hovering over the data points also mentions &lt;strong&gt;cumulative lift&lt;/strong&gt;.
      This measure is simply defined as the ratio of the y over the x value in that point.
      For the example data point at (20.0, 63.2), lift is equal to the trained model yield (63.2 percent)
      divided by the (theoretical) baseline yield at the same x value, so lift is 63.2 / 20.0 = 3.16. In the steep left parts
      of the trained model curves, cumulative lift rises sharply. On the KNN curve, it reaches its maximum value (4.13) at x=13.0.
    &lt;/p&gt;

    &lt;p&gt;So based on the lift graph alone, the bank could decide to &lt;strong&gt;contact its 13% top-ranked customers, and then stop&lt;/strong&gt;.&lt;/p&gt;

    &lt;p&gt;Alternatively, it could also decide to only stop contacting customers when the &lt;strong&gt;local lift&lt;/strong&gt; (i.e. the lift in
      the percentile immediately preceding the point) starts dropping below 1, i.e. performing worse than the (theoretical) baseline.
      On the KNN curve, local lift fluctuates around 1 in the x interval [19.0-32.0], so this is not such a clear-cut decision.&lt;/p&gt;
    
    &lt;p&gt;Now, despite all these niceties, there&#39;s still one ingredient missing: &lt;strong&gt;money&lt;/strong&gt;!&lt;/p&gt;

    &lt;h2&gt;Profit curve: knowing when to stop the campaign&lt;/h2&gt;

    &lt;p&gt;Each customer contact costs money, but also carries a potential reward in the form of future revenue.
      Let&#39;s bring in two new variables:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;the &lt;strong&gt;average cost per contact&lt;/strong&gt;. This cost is incurred irrespective of whether the 
	contact leads to a sale or not.&lt;/li&gt;
      &lt;li&gt;the &lt;strong&gt;average revenue per &lt;em&gt;successful&lt;/em&gt; contact&lt;/strong&gt;. An unsuccesful contact brings
	in zero revenue, by definition.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;Even though we have to limit ourselves to averages, these variables do allow us to improve on our rather abstract lift curve.
      The default &lt;strong&gt;profit curve&lt;/strong&gt; below assumes that each contact (successful or not) costs $10 on average,
      while the average &lt;em&gt;successful&lt;/em&gt; one carries $50 in revenue.
      &lt;/p&gt;

    &lt;p&gt;In this default configuration, the KNN profit curve maxes out at x=14, bringing in $6840 of cumulative profit.
      Compare this to the cumulative loss of $2410 in case we would just contact customers in random order.
      As a matter of fact, the current cost/revenue configuration would constantly write in the red in the baseline case.&lt;/p&gt;

    &lt;div id=&quot;containerForSlidersAndProfitCurve&quot; style=&quot;border-style:solid; border-width:1px; border-color:black; padding:25px 5px 5px 0px&quot;&gt;

    &lt;div id=&quot;containerFor2Sliders&quot; style=&quot;height:100; padding-left:10px;&quot;&gt;
    
      &lt;div style=&quot;clear:both;&quot;&gt;
      &lt;div style=&quot;float:left;&quot;&gt;&amp;nbsp;&amp;nbsp;avg. cost per customer contact (USD):&lt;/div&gt;
      &lt;span style=&quot;margin-left: 10px; margin-top: -20px; width:30%; float:left; margin-bottom:0px;&quot; id=&quot;avgCostPerContactSlider&quot;&gt;&lt;/span&gt;
      &lt;div style=&quot;margin-left: 10px; margin-top: 0px; float:left;&quot;&gt;&lt;strong id=&quot;avgCostPerContactSliderText&quot;&gt;10&lt;/strong&gt;&lt;/div&gt;
      &lt;/div&gt;

      &lt;div style=&quot;clear:both;&quot;&gt;
      &lt;div style=&quot;float:left;&quot;&gt;avg. revenue per successful sale (USD):&lt;/div&gt;
      &lt;span style=&quot;margin-left: 2px; margin-top:-20px; width:60%; float:left;&quot; id=&quot;avgRevenuePerContactSlider&quot;&gt;&lt;/span&gt;
      &lt;div style=&quot;margin-left: 10px; margin-top:0px; float:left&quot;&gt;&lt;strong id=&quot;avgRevenuePerContactSliderText&quot;&gt;50&lt;/strong&gt;&lt;/div&gt;
      &lt;/div&gt;

    &lt;/div&gt;&lt;!-- containerFor2Sliders --&gt;

    &lt;svg id=&quot;profitcurve&quot; style=&quot;clear:both; height:400px; width:100%;&quot;&gt;&lt;/svg&gt;
    &lt;script src=&quot;calcProfit.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;ProfitCurve.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

    &lt;/div&gt;&lt;!-- containerForSlidersAndProfitCurve --&gt;
    &lt;p align=&quot;right&quot;&gt;&lt;small&gt;[&lt;a href=&quot;ProfitCurve.html&quot; target=&quot;_profit&quot;&gt;view in separate window&lt;/a&gt;]&lt;/small&gt;&lt;/p&gt;

    &lt;p&gt;Now increase the average revenue per successful contact to $90, using the second slider
      on top of the graph above, and watch attentively. By increasing the profit per successful contact to 
      &lt;span style=&quot;white-space:nowrap&quot;&gt;$90-$10=$80&lt;/span&gt;, the shape of the profit curve
      has taken a different form. Cumulative profit now tops at $17.530, but to get there we have to contact 20&amp;#37; 
      of all customers. Also, if we were to contact &lt;em&gt;all&lt;/em&gt; (100&amp;#37;) customers, we would more or less break even, with
      a cumulative loss of only $330.&lt;/p&gt;

    &lt;p&gt;Finally, increase both sliders with $10, so their respective values become $20 and $100. While this has no effect
      on the profit per successful contact &lt;span style=&quot;white-space:nowrap&quot;&gt;($100-$20 = $80 = $90-$10)&lt;/span&gt;, the loss per
      &lt;em&gt;failed&lt;/em&gt; contact has &lt;em&gt;doubled&lt;/em&gt; from $10 to $20. As a result, the trained model profit curves now cross
      the breakeven line again (around x=40&amp;#37;), while the baseline curve goes permanently in the red again.&lt;/p&gt;

    &lt;p&gt;The bottom line is that any specific configuration of cost and revenue greatly influences the shape of the curves,
      the profitability intervals, and therefore the decision boundaries.&lt;/p&gt;

    &lt;h2&gt;Profit heat map: impressionistic view on individual and cumulative profit contributions&lt;/h2&gt;

    &lt;p&gt;How much does each &lt;em&gt;individual&lt;/em&gt; customer contribute to cumulative profit? In the heatmap below, each cell
      represents one customer from the test set. Customers are displayed in the ranking order defined by the model, with
      the most probable buyer first. Reading order is  left-to-right, top-down - the same as for written English.&lt;/p&gt;

    &lt;p&gt;In the baseline case, with default cost and revenue values, the heatmap progressively takes on deeper shades of red.
      Since the baseline lists customers in random order, there are more negative than positive contributions,
      no matter which region of the heatmap we look at. This is aptly demonstrated if you select
      profit: &amp;quot;contribution per individual customer&amp;quot;.&lt;/p&gt;

    &lt;div id=&quot;containerForControlsAndProfitHeatMap&quot; style=&quot;width:840px; border-style:solid; border-width:1px; border-color:black; padding:5px 5px 5px 10px&quot;&gt;

      &lt;div id=&quot;DropDownBoxes&quot; style=&quot;height:20px;&quot;&gt;
	&lt;span style=&quot;float:left; padding-left:10px; valign:middle padding-top:5px&quot;&gt;Model&lt;/span&gt;
	&lt;select id=&quot;model&quot; style=&quot;float:left; margin-left:20px;&quot;&gt;
	  &lt;option value=&quot;baseline&quot; selected=&quot;selected&quot;&gt;Baseline&lt;/option&gt;
	  &lt;option value=&quot;knn&quot;&gt;KNN&lt;/option&gt;
	  &lt;option value=&quot;logres&quot;&gt;Logistic Regression&lt;/option&gt;
	  &lt;option value=&quot;gaussianNB&quot;&gt;Gaussian Naive Bayes&lt;/option&gt;
	&lt;/select&gt;
	&lt;span style=&quot;float:left; margin-left:20px; padding-left:10px; valign:middle padding-top:5px&quot;&gt;Profit&lt;/span&gt;
	&lt;select id=&quot;profittype&quot; style=&quot;float:left; margin-left:10px;&quot;&gt;
	  &lt;option value=&quot;cumulative&quot; selected=&quot;selected&quot;&gt;Cumulative: includes contributions by higher-ranked customers&lt;/option&gt;
	  &lt;option value=&quot;single&quot;&gt;Contribution per individual customer&lt;/option&gt;
	&lt;/select&gt;
      &lt;/div&gt;
      
      &lt;div id=&quot;containerFor2Sliders4Heatmap&quot; style=&quot;clear:both; height:110; padding-left:10px; padding-top:30px;&quot;&gt;
    
	&lt;div style=&quot;clear:both;&quot;&gt;
	  &lt;div style=&quot;float:left;&quot;&gt;&amp;nbsp;&amp;nbsp;avg. cost per customer contact (USD):&lt;/div&gt;
	  &lt;span style=&quot;margin-left: 10px; margin-top: -20px; width:30%; float:left; margin-bottom:0px;&quot; id=&quot;avgCostPerContactSliderForHeatmap&quot;&gt;&lt;/span&gt;
	  &lt;div style=&quot;margin-left: 10px; float:left;&quot;&gt;&lt;strong id=&quot;avgCostPerContactSliderForHeatmapText&quot;&gt;10&lt;/strong&gt;&lt;/div&gt;
	&lt;/div&gt;
	
	&lt;div style=&quot;clear:both; margin-top:30px;&quot;&gt;
	  &lt;div style=&quot;float:left;&quot;&gt;avg. revenue per successful sale (USD):&lt;/div&gt;
	  &lt;span style=&quot;margin-left: 2px; margin-top:-20px; width:60%; float:left;&quot; id=&quot;avgRevenuePerContactSliderForHeatmap&quot;&gt;&lt;/span&gt;
	  &lt;div style=&quot;margin-left: 10px; float:left&quot;&gt;&lt;strong id=&quot;avgRevenuePerContactSliderForHeatmapText&quot;&gt;50&lt;/strong&gt;&lt;/div&gt;
	&lt;/div&gt;
	
      &lt;/div&gt;&lt;!-- containerFor2Sliders4Heatmap --&gt;

      &lt;div id=&quot;profitheatmap&quot; style=&quot;clear:both; width:830px;&quot;&gt;&lt;/div&gt;
      &lt;script src=&quot;ProfitHeatMap.js&quot;&gt;&lt;/script&gt;
      
      &lt;div id=&quot;heatmaptooltip&quot; class=&quot;hidden&quot;&gt;
        &lt;p&gt;&lt;span id=&quot;value&quot; /&gt;&lt;/p&gt;
      &lt;/div&gt;

    &lt;/div&gt;&lt;!-- containerForControlsAndProfitHeatMap --&gt;

    &lt;p align=&quot;right&quot; style=&quot;width:840px;&quot;&gt;&lt;small&gt;[&lt;a href=&quot;ProfitHeatMap.html&quot; target=&quot;_profitheatmap&quot;&gt;view in separate window&lt;/a&gt;]&lt;/small&gt;&lt;/p&gt;

    &lt;p&gt;Now select a non-baseline model, and see how the random distribution of individual positive profit contributions
    transforms into a more ordered view: the positive profit contributions are indeed pushed towards the beginning
      (top-left corner) of the heatmap. This is the power of the learned models at work.&lt;/p&gt;

    &lt;p&gt;Finally, also select different configurations of the cost and revenue parameters, and see how this influences the heatmap.
    For example, try the baseline model with cost 10 and revenue 90, as we did in the profit curve before. This configuration
      confirms that the cumulative profit remains near the break-even line.&lt;/p&gt;

    &lt;h2&gt;Recommendations&lt;/h2&gt;

    &lt;p&gt;Customers must be targeted in descending order of their probability to buy the product. Running the trained models on
      unseen customer data will provide such a ranking.&lt;/p&gt;

    &lt;p&gt;To enable an informed decision about when to halt the campaign, the bank must first provide information on cost and revenue
      per (successful) contact.
      &lt;ul&gt;
	&lt;li&gt;Without such information, we advise to stop when maximum cumulative lift is achieved,
	  or when we have run out of budget, whichever comes first.&lt;/li&gt;
	&lt;li&gt;If we do have such information, we advise to stop when maximum profit is achieved,
	  or when we have run out of budget, whichever comes first.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/p&gt;

    &lt;p&gt;Having set the cost and revenue variables, define the optimization criterion (e.g. maximum cumulative profit).
      Then consult the profit curve and heatmap to identify which and how many customers to contact, most probable
      buyers first.&lt;/p&gt;

    &lt;h2&gt;Additional resources&lt;/h2&gt;

    &lt;ul&gt;
      &lt;li&gt;Foster Provost &amp;amp; Tom Fawcett: &lt;a href=&quot;http://shop.oreilly.com/product/0636920028918.do&quot; target=&quot;_blank&quot;&gt;Data Science for Business. What you need to know about data mining and data-analytic thinking&lt;/a&gt;. O&#39;Reilly, 2013.&lt;br /&gt;Chapter 8: &amp;quot;Visualizing Model Performance&amp;quot; introduces the ROC, Lift and Profit curves.&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://nvd3.org&quot; target=&quot;_blank&quot;&gt;NVD3. Re-usable charts for D3.js&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/sujeetsr/d3.slider&quot; target=&quot;_blank&quot;&gt;D3.slider&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;http://bl.ocks.org/ianyfchang/8119685&quot; target=&quot;_blank&quot;&gt;Heatmap example&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;

  &lt;/body&gt;
&lt;/html&gt;


  &lt;p&gt;&lt;a href=&quot;/projects/banking-project/&quot;&gt;Selling a new banking product to the right customers (first)&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on February 20, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[Five data science haikus]]></title>
  <link rel="alternate" type="text/html" href="/blog/data-science-haikus/" />
  <id>/blog/data-science-haikus</id>
  <published>2015-02-15T17:20:00-05:00</published>
  <updated>2015-02-15T17:20:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;h1 id=&quot;one&quot;&gt;One&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;As data &lt;a href=&quot;http://www.quickanddirtytips.com/education/grammar/is-data-singular-or-plural&quot; target=&quot;_blank&quot;&gt;unfold&lt;/a&gt;&lt;br /&gt;
Alas! The model wont &lt;a href=&quot;http://en.wikipedia.org/wiki/Curve_fitting&quot; target=&quot;_blank&quot;&gt;fit&lt;/a&gt;&lt;br /&gt;
Still the curve bends right&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;two&quot;&gt;Two&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;While &lt;a href=&quot;http://en.wikipedia.org/wiki/Frequentist_inference&quot; target=&quot;_blank&quot;&gt;frequentists&lt;/a&gt; count,&lt;br /&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Bayesian_inference&quot; target=&quot;_blank&quot;&gt;Bayesians&lt;/a&gt; believe - or not&lt;br /&gt;
Now what is my fate?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;three&quot;&gt;Three&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Support_vector_machine&quot; target=&quot;_blank&quot;&gt;Support my vectors&lt;/a&gt;&lt;br /&gt;
Will you - the &lt;a href=&quot;http://en.wikipedia.org/wiki/Margin_classifier&quot; target=&quot;_blank&quot;&gt;margin&lt;/a&gt; must grow&lt;br /&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Binary_classification&quot; target=&quot;_blank&quot;&gt;Wheat from chaff&lt;/a&gt; apart&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;four&quot;&gt;Four&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;a href=&quot;http://en.wikipedia.org/wiki/Deep_learning&quot; target=&quot;_blank&quot;&gt;deeper we learn&lt;/a&gt;&lt;br /&gt;
The lonelier the &lt;a href=&quot;http://en.wikipedia.org/wiki/Artificial_neuron&quot; target=&quot;_blank&quot;&gt;neurons&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Black_magic&quot; target=&quot;_blank&quot;&gt;Black magic&lt;/a&gt; at work&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;five&quot;&gt;Five&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;My &lt;a href=&quot;http://en.wikipedia.org/wiki/Forensic_profiling&quot; target=&quot;_blank&quot;&gt;profile&lt;/a&gt; is me&lt;br /&gt;
A bunch of &lt;a href=&quot;http://en.wikipedia.org/wiki/Feature_(machine_learning)&quot; target=&quot;_blank&quot;&gt;features&lt;/a&gt; - thats all&lt;br /&gt;
But where is my soul?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/frederik_chelsea_market.jpg&quot; alt=&quot;Visiting Chelsea Market&quot; /&gt;
	&lt;figcaption&gt;Light is more important than the lantern, the poem more important than the notebook  &lt;a href=&quot;http://en.wikipedia.org/wiki/Nizar_Qabbani&quot; target=&quot;_blank&quot;&gt;Nizar Qabbani&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/data-science-haikus/&quot;&gt;Five data science haikus&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on February 15, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[That second I hugged a Googler]]></title>
  <link rel="alternate" type="text/html" href="/blog/hugging-a-googler/" />
  <id>/blog/hugging-a-googler</id>
  <published>2015-02-08T07:10:00-05:00</published>
  <updated>2015-02-08T07:10:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;This week I hugged a &lt;a href=&quot;https://www.linkedin.com/profile/view?id=27312399&quot;&gt;Googler&lt;/a&gt;, yes I did. How, why, huh? Let me tell you.&lt;/p&gt;

&lt;p&gt;On top of providing the formal lectures, challenges and project work, our &lt;a href=&quot;http://www.thisismetis.com/data-science&quot;&gt;bootcamp&lt;/a&gt; regularly invites speakers from industry.
So last Thursday, we were enlightened on the art of working with data in a scientifically and ethically sound fashion by no less than
a super-smart and super-enthusiastic &lt;a href=&quot;https://www.linkedin.com/profile/view?id=27312399&quot;&gt;Googler&lt;/a&gt; - my apologies for the double tautology.&lt;/p&gt;

&lt;p&gt;To get the interaction going, we, mere mortal students, were offered a multiple (6) choice question. The last one of which was,
obviously, &lt;em&gt;none of the above&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;For a number of reasons, this answer exerted an irresistible attraction on my whole brain, body and being:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;even in case of total ignorance, it still looks like you gave the matter such deep thought, that none of the above answers
could possibly be nuanced and/or precise enough for complete intellectual satisfaction&lt;/li&gt;
  &lt;li&gt;strategically, its a safe bet, because the speaker may want to demonstrate his/her proficiency on why all of the above answers are clearly wrong or incomplete, as an introduction to the rest of the talk&lt;/li&gt;
  &lt;li&gt;last but not least, my eldest daughter is a self-certified expert in guessing multiple-choice answers&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;So when the time came, I shouted F!&lt;/p&gt;

&lt;p&gt;And then it happened.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;[Googler]: Who said &amp;#39;F&amp;#39; over there?
[Humble student]: I did! (hesitantly raising my hand)
[Googler]: Why?
[Humble student]: Because whatever mumble mumble bla bla bla
[Googler]: That&amp;#39;s correct! Let me give you a hug
[Humble student]: Sure, why not&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As my grey cells &lt;a href=&quot;http://youtu.be/h8JX1Pl9F_Q?t=38s&quot;&gt;wandered off&lt;/a&gt;, I thankfully received my
proverbial pat on the shoulder. It was over in a second, but no less real.&lt;/p&gt;

&lt;p&gt;I hugged a Googler. Or rather, was hugged by one.&lt;/p&gt;

&lt;p&gt;In a strike of celestial irony, the remainder of the talk focused on the importance for aspiring data
scientists to &lt;strike&gt;dumb down&lt;/strike&gt; reformulate their scientific messages to less scientifically
inclined &lt;strike&gt;creatures&lt;/strike&gt; professionals
known as &lt;a href=&quot;http://be.linkedin.com/in/fdurant&quot;&gt;MBAs&lt;/a&gt;.
As I understood it, their main role at Google is to translate Truth into more digestible truths, depending
on the VP theyre trying to please.&lt;/p&gt;

&lt;p&gt;So by the time the talk was over, the earth had come back into its normal orbit, everyone knew their place,
and universal harmony was restored.&lt;/p&gt;

&lt;p&gt;But the hug was mine.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/jekyll_hyde_mad_scientist.jpg&quot; alt=&quot;Jekyll and Hyde: restaurant and social club for explorers and mad scientists&quot; /&gt;
	&lt;figcaption&gt;Explorers and mad (data) scientists feeling at home in New York City&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/hugging-a-googler/&quot;&gt;That second I hugged a Googler&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on February 08, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[A basic linear regression model for predicting movie revenue]]></title>
  <link rel="alternate" type="text/html" href="/projects/movie-project/" />
  <id>/projects/movie-project</id>
  <published>2015-01-30T07:00:00-05:00</published>
  <updated>2015-01-30T07:00:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;Our instructors from &lt;a href=&quot;http://datascopeanalytics.com&quot;&gt;Datascope Analytics&lt;/a&gt; designed the bootcamp around a number of projects.&lt;/p&gt;

&lt;p&gt;In week 2 &amp;amp; 3, we were all let loose on movie revenue data scraped from &lt;a href=&quot;http://www.boxofficemojo.com&quot;&gt;Box Office Mojo&lt;/a&gt;.
The major goal was to predict a movie-related value of choice by using a &lt;a href=&quot;http://en.wikipedia.org/wiki/Linear_regression&quot;&gt;linear regression&lt;/a&gt; model,
optionally involving &lt;a href=&quot;http://en.wikipedia.org/wiki/Logarithm&quot;&gt;logarithmic&lt;/a&gt; and/or &lt;a href=&quot;http://en.wikipedia.org/wiki/Polynomial_regression&quot;&gt;polynomial terms&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The first days were spent on writing and running the web scraper. I used &lt;a href=&quot;http://www.crummy.com/software/BeautifulSoup/&quot;&gt;Beautiful Soup&lt;/a&gt; and good old
&lt;a href=&quot;https://docs.python.org/2/library/re.html&quot;&gt;regular expressions&lt;/a&gt; to parse and convert the messy Box Office Mojo data into a nice and clean &lt;a href=&quot;http://en.wikipedia.org/wiki/Comma-separated_values&quot;&gt;comma-separated&lt;/a&gt; &lt;a href=&quot;/projects/movie/BoxOfficeMojoMovies.csv&quot;&gt;file&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The scope of my personal project shrunk as the data came in and the days went by.
In the end, after many iterations in &lt;a href=&quot;http://ipython.org/&quot;&gt;IPython&lt;/a&gt;, I got to fit a number of multilinear regression models with &lt;a href=&quot;http://statsmodels.sourceforge.net/0.5.0/regression.html&quot;&gt;statsmodels&lt;/a&gt;, using
&lt;a href=&quot;http://scikit-learn.org/stable/modules/generated/sklearn.metrics.mean_squared_error.html&quot;&gt;sklearn&lt;/a&gt; for model evaluation (&lt;a href=&quot;http://en.wikipedia.org/wiki/Root-mean-square_deviation&quot;&gt;root-mean-squared error&lt;/a&gt;), and the inevitable &lt;a href=&quot;http://matplotlib.org/api/pyplot_api.html&quot;&gt;pyplot&lt;/a&gt; for visualization.&lt;/p&gt;

&lt;p&gt;On Friday, the whole class delivered their presentations. My first-ever &lt;a href=&quot;/projects/movie/Metis_Data_Science_Project_Luther_20150130.pdf&quot;&gt;Keynote presentation&lt;/a&gt; was for a ficticious investor known by the name of Dino Brangelino. My conclusion: knowing the box office revenue of the opening weekend -on top of the production budget- reduces total revenue prediction error by 15%.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/movieproject_presentation_1.jpg&quot; /&gt;
	&lt;figcaption&gt;Presenting performance improvements in linear regression models to the Metis Data Science class&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;A not-so-random sample of subjects from my fellow students talks:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;how to convince laggards among the actors and actresses to go on Twitter, by predicting how many followers they would have if they did&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;can monthly consumer optimism predict the mutual prevalence of movie genres?&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;does the choice of a distributor help to secure an Oscar nomination?&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;which actor, actress, director or producer is overpaid or underpaid, given the gross revenue of the movies they have contributed to?&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;does the co-featuring network of actors/actresses determine movie revenue?&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/movieproject_presentation_2.jpg&quot; /&gt;
	&lt;figcaption&gt;Presenting observed vs. predicted movie gross revenue on the best-performing linear regression model&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;/projects/movie-project/&quot;&gt;A basic linear regression model for predicting movie revenue&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on January 30, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[First week impressions]]></title>
  <link rel="alternate" type="text/html" href="/blog/week1/" />
  <id>/blog/week1</id>
  <published>2015-01-16T07:00:00-05:00</published>
  <updated>2015-01-16T07:00:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;My first week in New York is coming to an end. Heres what an average weekday has looked like, so far:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Out of bed way too early, between 1-4 AM, breakfast around 6-7 AM&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://web.mta.info/maps/submap.html&quot;&gt;Public transport&lt;/a&gt; from &lt;a href=&quot;https://www.google.com/maps/place/71+Irving+Pl,+Brooklyn,+NY+11238/@40.6830384,-73.9596046,17z&quot;&gt;Krash Brooklyn&lt;/a&gt; to &lt;a href=&quot;https://www.google.com/maps/place/79+Madison+Ave,+New+York,+NY+10016/@40.7442036,-73.9853586,17z&quot;&gt;Metis&lt;/a&gt; in Midtown Manhattan:
    &lt;ul&gt;
      &lt;li&gt;Walk to Clinton/Washington station (5 minutes)&lt;/li&gt;
      &lt;li&gt;C line to West 4th Street / Washington Square station (9 stops, about 20 minutes)&lt;/li&gt;
      &lt;li&gt;B/D/F/M line to 34th Street / Herald Square station (3 stops, about 5 minutes)&lt;/li&gt;
      &lt;li&gt;Walk to Metis at 79 Madison Ave (10 minutes)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Class from 9AM until noon, first theory (project design, hypothesis testing, git &amp;amp; GitHub), then practical lab work (like the &lt;a href=&quot;/blog/hipster-or-not/&quot;&gt;hipster classification game&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;Lunch from noon until 1:30 PM. Theres an &lt;em&gt;overwhelming&lt;/em&gt; choice out there. So far, Ive tried &lt;a href=&quot;http://www.eataly.com/nyc/&quot;&gt;Eataly&lt;/a&gt;, &lt;a href=&quot;http://essenslowfastfood.com&quot;&gt;Essen&lt;/a&gt;, &lt;a href=&quot;http://www.breadbutternyc.com&quot;&gt;Bread &amp;amp; Butter&lt;/a&gt;, a Korean takeaway, plus a few more&lt;/li&gt;
  &lt;li&gt;Afternoon class with more practical lab work, until 6 PM +/- 1 hour. Working with &lt;a href=&quot;http://web.mta.info/developers/turnstile.html&quot;&gt;MTA turnstile data&lt;/a&gt; this week. Also found publicly available &lt;a href=&quot;https://data.cityofnewyork.us/Education/School-Point-Locations/jfju-ynrr&quot;&gt;School Point Location&lt;/a&gt; data, and installed &lt;a href=&quot;http://www.arcgis.com&quot;&gt;ArcGIS&lt;/a&gt; for mapping MTA stations and schools. All our code and artifacts are stored at &lt;a href=&quot;https://github.com/fdurant/NewYorkRedBulls&quot;&gt;GitHub&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Dinner in Manhattan with fellow Krashers, or straight home&lt;/li&gt;
  &lt;li&gt;In Brooklyn: Shopping at local deli, doing the dishes, watching &lt;a href=&quot;http://www.cc.com/shows/broad-city&quot;&gt;wacky TV series&lt;/a&gt; on Netflix/Amazon&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Other random activities and observations:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Walked from Brooklyn to Manhattan, over the Brooklyn Bridge&lt;/li&gt;
  &lt;li&gt;Walked up Fifth Avenue from Madison Square Park to Central Park&lt;/li&gt;
  &lt;li&gt;Bought some garments at Macys. Hmm, those trousers do look a bit too short, after all&lt;/li&gt;
  &lt;li&gt;Had a swim try-out at the &lt;a href=&quot;http://www.mphc.com&quot;&gt;Manhattan Plaza Health Club&lt;/a&gt;. Water temperature OK, out-of-water temperature not OK.&lt;/li&gt;
  &lt;li&gt;Despite our 90-minute lunch break, fellow students eat and walk to/from the eatery at great &lt;em&gt;speed&lt;/em&gt;, for no apparent reason&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/Krash_Brooklyn.jpg&quot; alt=&quot;Picture of Krash Brooklyn&quot; /&gt;
	&lt;figcaption&gt;Krash Brooklyn at 71 Irving Place, around 7:30 AM&lt;/figcaption&gt;
&lt;/figure&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/week1/&quot;&gt;First week impressions&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on January 16, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[The hipster classification game]]></title>
  <link rel="alternate" type="text/html" href="/blog/hipster-or-not/" />
  <id>/blog/hipster-or-not</id>
  <published>2015-01-12T15:07:00-05:00</published>
  <updated>2015-01-12T15:07:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Hipster_(contemporary_subculture)&quot;&gt;Hipster&lt;/a&gt; or not? A simple enough question, until youre being asked to come up with a precise rule set.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/hipster.jpg&quot; alt=&quot;Photo of a San Francisco hipster&quot; /&gt;
	&lt;figcaption&gt;&lt;a href=&quot;https://www.flickr.com/photos/cmichel67/11808909353/&quot; title=&quot;A San Francisco Hipster&quot;&gt;Photo Credit: Christopher Michel&lt;/a&gt;&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Starting from a training set of positive and negative specimina - &lt;em&gt;I just love that plural&lt;/em&gt;, six teams set out
to define the essential hipster features, and how they relate algorithmically. Once set in stone,
the algorithms were applied to an unseen test set, and classification accuracy was measured.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;/images/hipster_classification_evaluation.jpg&quot; alt=&quot;White board with evaluation of hipster classification results&quot; /&gt;
	&lt;figcaption&gt;Counting true vs. false positives vs. negatives&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Goal of the &lt;a href=&quot;http://www.thisismetis.com/blog/hipster-classifier-icebreaker&quot;&gt;icebreaker&lt;/a&gt;: demonstrate the core machine learning process, without using any machine other than our brain.&lt;/p&gt;

&lt;p&gt;Provisional conclusion: rolled up sleeves, a seemingly ungroomed beard, plus a &lt;a href=&quot;http://en.wikipedia.org/wiki/Beanie_(seamed_cap)&quot;&gt;beanie&lt;/a&gt; are potential
indicators of hipsterhood, if (and only if) properly combined.&lt;/p&gt;

&lt;p&gt;Basic lessons learnt:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;dont try to build a rule set (model) that matches the training set all too perfectly: it might lose its generalization power when applied to the test set&lt;/li&gt;
  &lt;li&gt;the training set might not contain all necessary features: for example, we didnt see any suspenders or colored trainers until the test set was revealed&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Now, whats worse? Being considered as a hipster while not being one, or vice versa?
Since, to our own surprise, there was no real hipster present in the room, this important question remains as yet scientifically unanswered.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/hipster-or-not/&quot;&gt;The hipster classification game&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on January 12, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[Discovery of the decade: IPython]]></title>
  <link rel="alternate" type="text/html" href="/blog/just-discovered-ipython/" />
  <id>/blog/just-discovered-ipython</id>
  <published>2015-01-11T02:28:00-05:00</published>
  <updated>2015-01-11T02:28:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;While doing the statistics prework (reading and exercises) for the &lt;a href=&quot;http://www.thisismetis.com/data-science&quot;&gt;Metis Data Science bootcamp&lt;/a&gt;,
I got to know &lt;a href=&quot;http://ipython.org/&quot;&gt;IPython&lt;/a&gt;, a &lt;em&gt;great&lt;/em&gt; tool/architecture for interactive computing and on-the-fly visualization and publishing.&lt;/p&gt;

&lt;p&gt;Im ashamed to say that IPython has been around for a &lt;em&gt;decade&lt;/em&gt; without my noticing it.
Which only shows how much this sabbatical was overdue :-)&lt;/p&gt;

&lt;p&gt;To see IPython at work, check out
some example IPython notebooks on the &lt;a href=&quot;http://nbviewer.ipython.org/&quot;&gt;nbviewer service&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Or if you have more time:&lt;/p&gt;

&lt;iframe width=&quot;420&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/bP8ydKBCZiY&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;By the way, I got &lt;a href=&quot;https://www.google.com/maps/place/71+Irving+Pl,+Brooklyn,+NY+11238/@40.6830384,-73.9596046,17z/data=!3m1!4b1!4m2!3m1!1s0x89c25bbd564b66a1:0x3dd32d62a569e278&quot;&gt;here&lt;/a&gt; alright.&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/just-discovered-ipython/&quot;&gt;Discovery of the decade: IPython&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on January 11, 2015.&lt;/p&gt;</content>
</entry>


  

<entry>
  <title type="html"><![CDATA[Welcome]]></title>
  <link rel="alternate" type="text/html" href="/blog/welcome/" />
  <id>/blog/welcome</id>
  <published>2014-12-26T09:18:00-05:00</published>
  <updated>2014-12-26T09:18:00-05:00</updated>
  <author>
    <name>Frederik Durant</name>
    <uri></uri>
    
  </author>
  <content type="html">&lt;p&gt;Its been almost half a decade since I wrote my &lt;a href=&quot;http://blog.prompt-speechapps.com&quot;&gt;last (public) blog post&lt;/a&gt;, so I figured it was high time for a restart.&lt;/p&gt;

&lt;p&gt;The occasion: two weeks from now, Ill be travelling to New York for a 12-week &lt;a href=&quot;http://www.thisismetis.com/data-science&quot;&gt;Data Science Bootcamp&lt;/a&gt; organized by &lt;a href=&quot;http://www.thisismetis.com/&quot;&gt;Metis&lt;/a&gt;. During that period, Ill be living at the &lt;a href=&quot;https://krash.io&quot;&gt;Brooklyn Krashpad&lt;/a&gt;, a co-housing facility for entrepreneurs, creative people and other types of lifelong learners and doers.&lt;/p&gt;

&lt;p&gt;Since visualization, presentation and communication form an integral part of data science, I plan to share my learnings, insights and other adventures via these pages.&lt;/p&gt;

&lt;p&gt;So thanks for visiting, and stay tuned!&lt;/p&gt;


  &lt;p&gt;&lt;a href=&quot;/blog/welcome/&quot;&gt;Welcome&lt;/a&gt; was originally published by Frederik Durant at &lt;a href=&quot;&quot;&gt;Frederik Durant's .data blog&lt;/a&gt; on December 26, 2014.&lt;/p&gt;</content>
</entry>

</feed>